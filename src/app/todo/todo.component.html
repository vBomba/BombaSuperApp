<button mat-raised-button (click)="createToDo()"> Create ToDo </button>

<br>


<table mat-table #todoTable [dataSource]="todoList" multiTemplateDataRows>
  <ng-container matColumnDef="name">
    <th mat-header-cell *matHeaderCellDef> Name </th>
    <td mat-cell *matCellDef="let todo"> {{todo.name}} </td>
  </ng-container>

  <ng-container matColumnDef="surname">
    <th mat-header-cell *matHeaderCellDef> Surname </th>
    <td mat-cell *matCellDef="let todo"> {{todo.surname}} </td>
  </ng-container>

  <ng-container matColumnDef="title">
    <th mat-header-cell *matHeaderCellDef> Title </th>
    <td mat-cell *matCellDef="let todo"> {{todo.title}} </td>
  </ng-container>

  <ng-container matColumnDef="completed">
    <th mat-header-cell *matHeaderCellDef> Completed </th>
    <td mat-cell *matCellDef="let todo">
      <mat-checkbox [(ngModel)]="todo.completed" (change)="refreshCompleted(todo, $event)"> </mat-checkbox>
    </td>
  </ng-container>

  <ng-container matColumnDef="selectedEdit">
    <td mat-cell *matCellDef="let todo" [attr.colspan]="displayedColumns.length">
      <div [@detailExpand]="todo == selectedToDo ? 'expanded' : 'collapsed'">
        <div class="editor-container" *ngIf="todo == selectedToDo">
          <mat-form-field class="editor-input">
            <input matInput placeholder="Name" [(ngModel)]="cloned.name">
          </mat-form-field>

          <mat-form-field class="editor-input">
            <input matInput placeholder="Surname" [(ngModel)]="cloned.surname">
          </mat-form-field>

          <mat-form-field class="editor-input">
            <input matInput placeholder="Title" [(ngModel)]="cloned.title">
          </mat-form-field>
          <button mat-raised-button (click)="removeToDo(todo)"> Delete </button>
          <button mat-raised-button (click)="saveToDo(todo, todoTable)"> Save </button>
        </div>
      </div>
    </td>
  </ng-container>

  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  <tr mat-row *matRowDef="let row; columns: displayedColumns;" [class.example-expanded-row]="selectedToDo === row"
    (click)="selectItem(row)"> </tr>
  <tr mat-row *matRowDef="let editrow; columns: ['selectedEdit']" class="selected-edit-row"></tr>
</table>
